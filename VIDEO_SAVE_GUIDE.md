# 视频保存位置说明

## 📹 视频裁剪后保存到哪里了？

### **完整流程：**

```
1. 用户选择视频并裁剪
   ↓
2. 后端处理并返回裁剪后的视频
   ↓
3. 前端保存到【临时目录】
   📁 Android: /data/data/com.example.pet_motion_lab/cache/trimmed_xxx.mp4
   📁 iOS: /var/mobile/Containers/Data/Application/xxx/tmp/trimmed_xxx.mp4
   ↓
4. 用户点击"保存到相册"按钮
   ↓
5. 请求存储权限（如果未授权）
   ↓
6. 保存到【手机相册】
   📱 Android: /storage/emulated/0/DCIM/ 或 Pictures/
   📱 iOS: 照片应用
   ↓
7. 删除临时文件
```

---

## 🔍 **如何查看保存的视频**

### **Android 手机：**

1. **打开"相册"或"图库"应用**
2. **查看"视频"或"最近添加"**
3. 视频会显示在相册中，文件名类似：`trimmed_xxx.mp4`

### **iOS 手机：**

1. **打开"照片"应用**
2. **查看"最近项目"或"视频"相册**
3. 视频会显示在照片库中

---

## ⚠️ **常见问题**

### **问题 1：点击"保存到相册"后没有看到视频**

**可能原因：**
- ❌ 没有授予存储权限
- ❌ 相册应用没有刷新

**解决方法：**
1. **检查权限**：
   - 设置 → 应用 → Pet Motion Lab → 权限 → 存储/照片
   - 确保已授予权限

2. **刷新相册**：
   - 关闭并重新打开相册应用
   - 或者重启手机

3. **查看日志**：
   - 在 Flutter 应用中查看控制台输出
   - 看是否有错误信息

---

### **问题 2：提示"需要存储权限"**

**解决方法：**
1. 点击"允许"授予权限
2. 如果误点了"拒绝"，需要手动开启：
   - Android: 设置 → 应用 → Pet Motion Lab → 权限 → 照片和视频 → 允许
   - iOS: 设置 → Pet Motion Lab → 照片 → 允许

---

### **问题 3：视频保存成功但找不到**

**Android 查找方法：**
1. 打开"文件管理器"
2. 进入 `DCIM` 或 `Pictures` 文件夹
3. 按修改时间排序，查找最新的视频

**iOS 查找方法：**
1. 打开"照片"应用
2. 点击"相簿" → "最近项目"
3. 视频应该在最上面

---

## 🛠️ **调试信息**

如果保存失败，应用会在控制台输出详细信息：

```
📱 请求存储权限...
✅ 权限已授予
📁 视频路径: /data/data/.../cache/trimmed_xxx.mp4
📊 文件大小: 1234567 字节
💾 开始保存到相册...
✅ 保存成功！
🗑️ 已删除临时文件
```

如果看到错误信息，请截图并报告。

---

## 📝 **技术细节**

### **使用的库：**
- `gal: ^2.3.0` - 保存到相册
- `permission_handler: ^11.0.1` - 权限管理

### **所需权限：**
- Android 13+: `READ_MEDIA_VIDEO`
- Android 12-: `WRITE_EXTERNAL_STORAGE`
- iOS: `Photos` 权限

### **保存位置：**
- **临时文件**：系统临时目录（自动清理）
- **最终保存**：手机相册（永久保存）

---

## ✅ **验证保存成功**

保存成功后，你应该看到：
1. ✅ 绿色提示："视频已保存到相册！"
2. ✅ 相册中出现新视频
3. ✅ 视频可以正常播放
4. ✅ 视频可以分享给其他应用

---

## 🔧 **如果还是找不到**

请提供以下信息：
1. 手机型号和系统版本
2. 是否授予了存储权限
3. 控制台的完整日志
4. 是否看到"保存成功"的提示

