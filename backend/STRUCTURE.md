# Backend é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ ç›®å½•ç»“æ„

```
backend/
â”œâ”€â”€ api/                        # ğŸŒ API è·¯ç”±å±‚
â”‚   â”œâ”€â”€ background_removal.py   # èƒŒæ™¯å»é™¤ API
â”‚   â”œâ”€â”€ image_generation.py     # å›¾ç‰‡ç”Ÿæˆ API
â”‚   â”œâ”€â”€ kling_generation.py     # å¯çµAIç”Ÿæˆ API
â”‚   â””â”€â”€ video_trimming.py       # è§†é¢‘è£å‰ª API
â”‚
â”œâ”€â”€ services/                   # ğŸ”§ æœåŠ¡å±‚ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â””â”€â”€ pipeline_service.py     # Flux ç®¡é“æœåŠ¡
â”‚
â”œâ”€â”€ utils/                      # ğŸ› ï¸ å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ image_utils.py          # å›¾ç‰‡å¤„ç†å·¥å…·
â”‚   â””â”€â”€ video_utils.py          # è§†é¢‘å¤„ç†å·¥å…·
â”‚
â”œâ”€â”€ scripts/                    # ğŸ“œ ç‹¬ç«‹è„šæœ¬
â”‚   â”œâ”€â”€ video/                  # è§†é¢‘å¤„ç†è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ cut_video_frames.py      # å‰ªåˆ‡è§†é¢‘å¸§
â”‚   â”‚   â”œâ”€â”€ trim_video.py            # ä¿ç•™å‰Nå¸§
â”‚   â”‚   â”œâ”€â”€ reverse_video.py         # è§†é¢‘å€’æ”¾
â”‚   â”‚   â””â”€â”€ convert_mp4_to_gif.py    # MP4è½¬GIF
â”‚   â”‚
â”‚   â”œâ”€â”€ image/                  # å›¾ç‰‡å¤„ç†è„šæœ¬
â”‚   â”‚   â””â”€â”€ extract_last_frame.py    # æå–æœ€åä¸€å¸§
â”‚   â”‚
â”‚   â”œâ”€â”€ setup/                  # è®¾ç½®è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ download_models.py       # ä¸‹è½½æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ download_pose_library.py # ä¸‹è½½å§¿æ€åº“
â”‚   â”‚   â”œâ”€â”€ download_best_models.sh  # ä¸‹è½½æœ€ä½³æ¨¡å‹
â”‚   â”‚   â””â”€â”€ verify_setup.py          # éªŒè¯è®¾ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ generate_base_pet.py    # ç”ŸæˆåŸºç¡€å® ç‰©å›¾ç‰‡
â”‚   â””â”€â”€ batch_generate_base_pets.py  # æ‰¹é‡ç”Ÿæˆ
â”‚
â”œâ”€â”€ prompt_config/              # ğŸ’¬ æç¤ºè¯é…ç½®
â”‚   â””â”€â”€ prompts.py              # æç¤ºè¯å®šä¹‰
â”‚
â”œâ”€â”€ models/                     # ğŸ¤– æ¨¡å‹æ–‡ä»¶ç›®å½•
â”œâ”€â”€ output/                     # ğŸ“¤ è¾“å‡ºæ–‡ä»¶ç›®å½•
â”œâ”€â”€ temp/                       # ğŸ—‚ï¸ ä¸´æ—¶æ–‡ä»¶ç›®å½•
â”‚
â”œâ”€â”€ main.py                     # ğŸš€ ä¸»æœåŠ¡å™¨ï¼ˆå®Œæ•´ç‰ˆï¼ŒåŒ…å«Fluxï¼‰
â”œâ”€â”€ main_kling_only.py          # ğŸš€ ä¸»æœåŠ¡å™¨ï¼ˆè½»é‡ç‰ˆï¼Œä»…å¯çµAIï¼‰
â”œâ”€â”€ config.py                   # âš™ï¸ é…ç½®æ–‡ä»¶
â”œâ”€â”€ kling_api_helper.py         # ğŸ”Œ å¯çµAI API è¾…åŠ©å‡½æ•°
â”œâ”€â”€ pipeline_kling.py           # ğŸ¨ å¯çµAI ç®¡é“
â””â”€â”€ requirements.txt            # ğŸ“¦ Python ä¾èµ–
```

---

## ğŸ¯ å„å±‚èŒè´£

### **API å±‚** (`api/`)
- å¤„ç† HTTP è¯·æ±‚å’Œå“åº”
- å‚æ•°éªŒè¯
- è°ƒç”¨æœåŠ¡å±‚
- è¿”å›ç»“æœç»™å‰ç«¯

### **æœåŠ¡å±‚** (`services/`)
- æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- æ¨¡å‹åŠ è½½å’Œç®¡ç†
- å¤æ‚çš„å¤„ç†æµç¨‹

### **å·¥å…·å±‚** (`utils/`)
- å¯å¤ç”¨çš„å·¥å…·å‡½æ•°
- å›¾ç‰‡/è§†é¢‘å¤„ç†
- æ–‡ä»¶æ“ä½œç­‰

### **è„šæœ¬å±‚** (`scripts/`)
- ç‹¬ç«‹è¿è¡Œçš„è„šæœ¬
- å¼€å‘å’Œæµ‹è¯•å·¥å…·
- ä¸€æ¬¡æ€§ä»»åŠ¡

---

## ğŸš€ å¯åŠ¨æœåŠ¡å™¨

### è½»é‡ç‰ˆï¼ˆæ¨èï¼Œä»…å¯çµAIï¼‰
```bash
python main_kling_only.py
```

### å®Œæ•´ç‰ˆï¼ˆåŒ…å«æœ¬åœ°Fluxæ¨¡å‹ï¼‰
```bash
python main.py
```

---

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ API ç«¯ç‚¹
1. åœ¨ `api/` ç›®å½•åˆ›å»ºæ–°çš„è·¯ç”±æ–‡ä»¶
2. åœ¨ `main.py` æˆ– `main_kling_only.py` ä¸­æ³¨å†Œè·¯ç”±
3. å¦‚éœ€å¤æ‚é€»è¾‘ï¼Œåœ¨ `services/` åˆ›å»ºæœåŠ¡ç±»
4. å¦‚éœ€å·¥å…·å‡½æ•°ï¼Œåœ¨ `utils/` æ·»åŠ 

### æ·»åŠ æ–°çš„è„šæœ¬
1. æ ¹æ®åŠŸèƒ½æ”¾å…¥ `scripts/` çš„å¯¹åº”å­ç›®å½•
2. æ›´æ–° `scripts/README.md`

---

## ğŸ”§ ä¾èµ–ç®¡ç†

å®‰è£…ä¾èµ–ï¼š
```bash
pip install -r requirements.txt
```

---

## ğŸ“Š API æ–‡æ¡£

å¯åŠ¨æœåŠ¡å™¨åè®¿é—®ï¼š
- **Swagger UI**: http://localhost:8002/docs
- **å¥åº·æ£€æŸ¥**: http://localhost:8002/health

